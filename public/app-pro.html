<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SafeSpace - Ruang Aman</title>
  <link rel="stylesheet" href="styles-pro.css">
</head>
<body>
  <div class="app-layout">
    <!-- Header -->
    <header class="app-header">
      <div class="header-logo">
        <div class="logo-icon" style="width:28px;height:28px;font-size:11px;">SS</div>
        <span>SafeSpace</span>
      </div>
      <div class="header-user">
        <span class="user-name" id="userName">Loading...</span>
        <a href="/api/auth/logout" class="btn btn-ghost btn-sm">Keluar</a>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-tabs">
      <button class="nav-tab active" data-tab="chat">
        <svg class="nav-tab-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
        </svg>
        <span>Chat</span>
      </button>
      <button class="nav-tab" data-tab="journal">
        <svg class="nav-tab-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
        </svg>
        <span>Jurnal</span>
      </button>
      <button class="nav-tab" data-tab="mood">
        <svg class="nav-tab-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span>Mood</span>
      </button>
      <button class="nav-tab" data-tab="help">
        <svg class="nav-tab-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>
        </svg>
        <span>Bantuan</span>
      </button>
    </nav>

    <!-- Main Content -->
    <main class="app-content">
      <!-- Chat Tab -->
      <section id="tab-chat" class="tab-content active">
        <div class="chat-layout">
          <aside class="chat-sidebar">
            <div class="sidebar-header">
              <h2 class="sidebar-title">Ruang Chat</h2>
              <button id="newChatBtn" class="btn btn-primary btn-sm">+ Baru</button>
            </div>
            <div class="session-list" id="sessionList">
              <p class="empty-state">Belum ada ruang chat</p>
            </div>
          </aside>

          <div class="chat-main">
            <div class="chat-header" id="chatHeader" hidden>
              <h3 class="chat-topic" id="chatTopic">Pilih ruang chat</h3>
              <button id="reportChatBtn" class="btn btn-ghost btn-sm" style="color: var(--danger);">Laporkan</button>
            </div>
            
            <div class="chat-messages" id="messagesContainer">
              <p class="empty-state">Pilih atau buat ruang chat baru untuk mulai bercerita</p>
            </div>

            <div class="chat-input-area" id="chatInputArea" hidden>
              <form id="messageForm" class="chat-form">
                <textarea 
                  id="messageInput" 
                  class="chat-input" 
                  placeholder="Tulis pesanmu di sini..."
                  rows="1"
                  maxlength="2000"
                  required
                ></textarea>
                <button type="submit" class="btn btn-primary">Kirim</button>
              </form>
            </div>
          </div>
        </div>

        <!-- New Chat Modal -->
        <div id="newChatModal" class="modal" hidden>
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title">Buat Ruang Chat Baru</h2>
            </div>
            <form id="newChatForm">
              <div class="form-group">
                <label class="form-label" for="chatTopicInput">Topik Pembahasan</label>
                <input 
                  type="text" 
                  id="chatTopicInput" 
                  class="form-input"
                  placeholder="Contoh: Berbagi cerita hari ini"
                  minlength="3"
                  maxlength="200"
                  required
                >
              </div>
              <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelNewChat" onclick="document.getElementById('newChatModal').hidden = true;">Batal</button>
                <button type="submit" class="btn btn-primary">Buat Ruang</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Report Modal -->
        <div id="reportModal" class="modal" hidden>
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title">Laporkan Ruang Chat</h2>
            </div>
            <form id="reportForm">
              <div class="form-group">
                <label class="form-label" for="reportReason">Alasan Laporan</label>
                <textarea 
                  id="reportReason" 
                  class="form-input"
                  style="min-height: 120px;"
                  placeholder="Jelaskan mengapa kamu melaporkan ruang ini..."
                  minlength="10"
                  maxlength="1000"
                  required
                ></textarea>
              </div>
              <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelReport" onclick="document.getElementById('reportModal').hidden = true;">Batal</button>
                <button type="submit" class="btn btn-danger">Kirim Laporan</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- Journal Tab -->
      <section id="tab-journal" class="tab-content">
        <div class="journal-container">
          <div class="journal-header">
            <h2>Jurnal Pribadi</h2>
            <button id="newJournalBtn" class="btn btn-primary">+ Tulis Baru</button>
          </div>
          
          <div class="journal-list" id="journalList">
            <p class="empty-state">Belum ada entri jurnal. Mulai menulis sekarang!</p>
          </div>
        </div>

        <!-- Journal Modal -->
        <div id="journalModal" class="modal" hidden>
          <div class="modal-content modal-large">
            <div class="modal-header">
              <h2 class="modal-title" id="journalModalTitle">Tulis Jurnal Baru</h2>
            </div>
            <form id="journalForm">
              <input type="hidden" id="journalEntryId">
              <div class="form-group">
                <label class="form-label" for="journalTitle">Judul</label>
                <input 
                  type="text" 
                  id="journalTitle" 
                  class="form-input"
                  placeholder="Judul jurnalmu"
                  maxlength="200"
                  required
                >
              </div>
              <div class="form-group">
                <label class="form-label" for="journalBody">Isi</label>
                <textarea 
                  id="journalBody" 
                  class="form-input"
                  style="min-height: 200px;"
                  placeholder="Tuangkan pikiranmu di sini..."
                  maxlength="10000"
                  required
                ></textarea>
              </div>
              <div class="form-group">
                <label class="form-label" for="journalTags">Tags (pisahkan dengan koma)</label>
                <input 
                  type="text" 
                  id="journalTags" 
                  class="form-input"
                  placeholder="refleksi, syukur, tujuan"
                >
              </div>
              <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelJournal" onclick="document.getElementById('journalModal').hidden = true;">Batal</button>
                <button type="submit" class="btn btn-primary">Simpan</button>
              </div>
            </form>
          </div>
        </div>

        <!-- View Journal Modal -->
        <div id="viewJournalModal" class="modal" hidden>
          <div class="modal-content modal-large">
            <div class="modal-header">
              <h2 class="modal-title" id="viewJournalTitle">Title</h2>
            </div>
            <div style="margin-bottom: var(--space-4);">
              <span id="viewJournalDate" class="text-sm text-muted"></span>
              <span id="viewJournalTags"></span>
            </div>
            <div id="viewJournalBody" style="white-space: pre-wrap; color: var(--text-secondary);"></div>
            <div class="modal-actions">
              <button class="btn btn-secondary" id="closeViewJournal" onclick="document.getElementById('viewJournalModal').hidden = true;">Tutup</button>
              <button class="btn btn-primary" id="editJournalBtn">Edit</button>
              <button class="btn btn-danger" id="deleteJournalBtn">Hapus</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Mood Tab -->
      <section id="tab-mood" class="tab-content">
        <div class="mood-container">
          <div class="mood-header">
            <h2 class="mood-question">Bagaimana perasaanmu hari ini?</h2>
            <p class="text-muted">Pilih angka yang paling menggambarkan kondisimu</p>
          </div>

          <form id="moodForm">
            <div class="mood-scale" id="moodScale">
              <label class="mood-option">
                <input type="radio" name="rating" value="1" required>
                <span class="mood-number">1</span>
                <span class="mood-label">Sangat Buruk</span>
              </label>
              <label class="mood-option">
                <input type="radio" name="rating" value="2">
                <span class="mood-number">2</span>
                <span class="mood-label">Buruk</span>
              </label>
              <label class="mood-option">
                <input type="radio" name="rating" value="3">
                <span class="mood-number">3</span>
                <span class="mood-label">Netral</span>
              </label>
              <label class="mood-option">
                <input type="radio" name="rating" value="4">
                <span class="mood-number">4</span>
                <span class="mood-label">Baik</span>
              </label>
              <label class="mood-option">
                <input type="radio" name="rating" value="5">
                <span class="mood-number">5</span>
                <span class="mood-label">Sangat Baik</span>
              </label>
            </div>

            <div class="mood-note">
              <label class="form-label" for="moodNote">Catatan (opsional)</label>
              <textarea 
                id="moodNote" 
                class="form-input"
                placeholder="Ada yang ingin kamu catat tentang perasaanmu?"
                rows="3"
                maxlength="500"
              ></textarea>
            </div>

            <button type="submit" class="btn btn-primary btn-block">Simpan Mood</button>
          </form>

          <div class="mood-history">
            <h3 class="mood-history-title">Riwayat Mood</h3>
            <div id="moodHistory">
              <p class="empty-state">Belum ada riwayat mood</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Help Tab -->
      <section id="tab-help" class="tab-content">
        <div class="help-container">
          <div class="help-header">
            <h2 class="help-title">Butuh Bantuan?</h2>
            <p class="help-subtitle">Jangan ragu untuk mencari bantuan profesional</p>
          </div>

          <div class="help-section">
            <h3 class="help-section-title">Hotline Krisis Indonesia</h3>
            <div class="help-contact">
              <p class="help-contact-name">Into The Light Indonesia</p>
              <p class="help-contact-number">119 ext 8 (24 jam)</p>
            </div>
            <div class="help-contact">
              <p class="help-contact-name">Yayasan Pulih</p>
              <p class="help-contact-number">(021) 788-42580</p>
            </div>
            <div class="help-contact">
              <p class="help-contact-name">LSM Jangan Bunuh Diri</p>
              <p class="help-contact-number">(021) 9696-9293 atau 0858-8100-8200</p>
            </div>
            <div class="help-contact">
              <p class="help-contact-name">Sejiwa (Sehat Jiwa)</p>
              <p class="help-contact-number">119 ext 8</p>
            </div>
          </div>

          <div class="help-section">
            <h3 class="help-section-title" style="color: var(--text-primary);">Tips Menggunakan SafeSpace</h3>
            <ul style="list-style: none; padding: 0;">
              <li style="padding: var(--space-3) 0; border-bottom: 1px solid var(--border-light); font-size: var(--text-sm); color: var(--text-secondary);">
                Gunakan nama panggilan untuk menjaga privasi
              </li>
              <li style="padding: var(--space-3) 0; border-bottom: 1px solid var(--border-light); font-size: var(--text-sm); color: var(--text-secondary);">
                Jurnal bersifat pribadi dan hanya dapat dilihat olehmu
              </li>
              <li style="padding: var(--space-3) 0; border-bottom: 1px solid var(--border-light); font-size: var(--text-sm); color: var(--text-secondary);">
                Lacak mood harianmu untuk memahami pola emosimu
              </li>
              <li style="padding: var(--space-3) 0; font-size: var(--text-sm); color: var(--text-secondary);">
                Laporkan konten yang tidak pantas untuk menjaga keamanan komunitas
              </li>
            </ul>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="app.js" type="module"></script>
</body>
</html>
